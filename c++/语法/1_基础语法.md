|目录|
|--|
|[1. 条件语句](#1-条件语句)|
|[2. 循环语句](#2-循环语句)|
|[3. lambda表达式](#3-lambda表达式)|


# 1 条件语句

**if条件**
```c++
if (notify == 1) {
    std::cout << data <<" notify" << std::endl;
}else if (notify == 2){
    std::cout << data <<" notify" << std::endl;
}else {
    std::cout << data <<" notify" << std::endl;
}
```

**switch条件语句**：
```c++
int notify = 1;
switch (notify) {
    case 1: {
        std::cout << data << std::endl;
    } // 可加大括号，也可不加
    case 2:
        std::cout << data << std::endl;
        break; // 退出switch语句，如果没有则会执行下一个case的代码，即使case不满足条件
    default: // 当以上case都不满足或者没有签名执行的case中没有break语句时，会执行default的代码
        std::cout << data << std::endl;
}
```

# 2 循环语句

c++中的循环语句包含如下5种：

```c++
// while循环
int i = 0;
while (i < 5) {
    std::cout << "while i = " << i << std::endl;
    if (++i > 4) {
        break; // 退出循环
    }
}

// do...while循环
do {
    std::cout << "do-while i = " << i << std::endl;
    ++i;
} while (i < 5);


// for循环
for (int i = 0; i < 5; ++i) {
    std::cout << "for i = " << i << std::endl;
}

// for循环（）每次循环x为v每个元素的拷贝，对x的修改不会影响v中元素的值
std::vector<int> v{1, 2, 3, 4, 5};
for (int x : v) {
    x++;
    std::cout << "range-for x = " << x << std::endl;
}

// 引用版本（避免拷贝， 每次循环x都是v中元素的引用，对x的修改会影响v中元素的值）
for (int& x : v) {
    x *= 2;
}

loop:
if (i >= 5)
    goto end;
std::cout << "goto loop i = " << i << std::endl;
++i;
goto loop;
end:
```

# 3 Lambda表达式

**无参数、无返回值**:

```c++
[] {
    std::cout<<"lambda 表达式"<<std::endl;
}();
```

**自动返回类型**

```c++
auto result = [] {
    return "自动返回类型";
}(); // result类型将是const char*
std::cout << result << std::endl;
```

**显示返回类型**:
```c++
std::string result = []-> std::string {
    return "显示返回类型";
}();
std::cout << result << std::endl;
```

**值捕获**:

```c++
int a = 1;
[a] {
    // lambda表达式中的值捕获是const修饰的，不能修改
    std::cout << a << std::endl;
}();
```

**引用捕获**：

```c++
int a = 1;
[&a] {
    a++; // 引用捕获后，修改lambda表达式中捕获的参数会影响原本的参数值
    std::cout << a << std::endl;
}();
std::cout << a << std::endl;
```

**捕获多个变量**：

```c++
std::string result;
int a = 1;
[result, &a] {
    std::cout << a << std::endl;
}();
```

**捕获所有外部变量**:

```c++
// 值捕获所有外部变量
std::string result;
int a = 1;
[=] {
    std::cout << a << std::endl;
    std::cout << result << std::endl;
}();
```

```c++
// 引用捕获所有外部变量
std::string result;
int a = 1;
[&] {
    std::cout << a << std::endl;
    std::cout << result << std::endl;
}();
```

**默认捕获 + 显式指定**：

```c++
std::string result;
int a = 1;
[=, &a， r] {
    // a使用引用捕获，其他变量使用值捕获
    a++;
    std::cout << a << std::endl;
}();

[&, a] {
    // a使用值捕获，其他变量使用引用捕获
    a++;
    std::cout << a << std::endl;
}();
```

**初始化捕获（C++14）**：

```c++
std::string result("原始值");
[result = "初始化捕获"] { // 这里的初始化不会修改result的原始值
    std::cout << result << std::endl;
}();
std::cout << result << std::endl;
```

**move捕获**：

```c++
 std::unique_ptr<int> p = std::make_unique<int>(1);
[ptr = std::move(p)] {
    std::cout << *ptr << std::endl;
}();
if (p == nullptr){
    std::cout << "p为空" << std::endl; // 将执行这条语句
}else {
    std::cout << "p不为空" << std::endl;
}
```

**捕获this**：

```c++
class A {
public:
    void f() {
        [this] {
            std::cout << value;
        }();
    }
private:
    int value = 10;
};

A aa;
aa.f();
```

# 4 结构体

## 4.1 结构体的定义

**空结构体**:

```c++
struct Person{};
printf("%llu\n", sizeof(Person)); // 输出为1
```

**含成员变量的结构体**：

```c++
struct Person {
    std::string name;
    int age;
};
```

**在定义结构体的同时声明变量**:

```c++
struct Person {
    std::string name;
    int age{};
}p1, p2, p3;
```

**匿名结构体**:

```c++
struct {
    float f;
}n1, n2;
```

**定义结构体的构造函数**：

```c++
struct Person{
    std::string name;
    int age;

    Person(std::string name, int age): name(std::move(name)), age(age) {}

    Person() {
        this->name = "";
        this->age = 0;
    }
};
```