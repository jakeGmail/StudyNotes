[toc]

# 1 代理
在HTTP协议的上下文中，代理（Proxy）通常指的是一个中间服务器，它在客户端（如用户的浏览器）和目标服务器（即客户端想要访问的服务器）之间充当中介。客户端不是直接与目标服务器通信，而是将请求发送到代理服务器，代理服务器将请求转发到目标服务器，再将目标服务器返回的结果转发回客户端。

代理有几种不同的用途：

1. **隐私和匿名性**：代理可以隐藏客户端的真实IP地址，使其在网络上具有一定程度的匿名性。

2. **缓存**：代理服务器可以缓存经常请求的内容，从而提高访问速度，减少网络带宽的使用。

3. **安全**：代理可以为网络提供额外的安全层，执行内容过滤或防止对内部网络的不必要访问。

4. **访问控制**：通过代理可以对网络进行访问控制，限制或允许对特定内容或网站的访问。

5. **绕过限制**：如果客户端无法直接访问某些服务（可能是由于地理位置或网络审查导致的），代理可以帮助绕过这些限制。

在技术实现上，代理可以分为不同的类型，包括：

- **正向代理（Forward Proxy）**：位于客户端和互联网之间。客户端必须直接配置或通过脚本配置以使用代理。

- **反向代理（Reverse Proxy）**：位于客户端和目标服务器之间，但它通常是由目标服务器或其所在网络设置的。对于客户端来说，似乎直接和服务器通信，而实际上是在和代理通信。

- **透明代理（Transparent Proxy）**：客户端可能不知道代理的存在，因为它的请求自动通过代理转发而无需任何特定的客户端配置。

- **匿名代理**：不会透露客户端的真实IP地址。

- **高匿代理（Elite Proxy）**：完全隐藏客户端自身的存在，连代理自身的存在也不会透露。

代理可以基于软件、硬件，或二者结合的实现，且可以是本地或云端的服务。配置和使用代理通常在浏览器或整个操作系统的网络设置中进行调整，或者通过应用程序特定的配置来实现。


代理分为2类
- http代理
- shadowsocks

# 2 设置代理
```go
import (
	"io/ioutil"
	"log"
	"net/http"
	"net/url"
)

func ProxyTest() {
    // 设置socks代理
	proxtUrl, _ := url.Parse("socks5://127.0.0.1:1080")
	
    // 设置http代理
    //proxtUrl,_ := url.Parse("http://127.0.0.1:8087")
	transport := &http.Transport{
		Proxy: http.ProxyURL(proxtUrl),
	}

	client := http.Client{
		Transport: transport,
	}

	resp, err := client.Get("http://google.com")
	if err != nil {
		log.Fatal("get google failed:", err.Error())
	}

	buf, _ := ioutil.ReadAll(resp.Body)
	log.Println("buf=", string(buf))
}
```