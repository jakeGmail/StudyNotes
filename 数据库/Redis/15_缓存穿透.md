# 缓存穿透的现象
1. 应用服务器流量随时间增量较大
2. Redis服务器命中率随时间逐步降低
3. Redis内存平稳，但CPU占用激增
4. 数据库服务器压力激增
5. 数据库崩溃

6.Redis中出现大面积未命中
7. 出现非正常URL

# 缓存穿透原因
1. 请求的数据在数据库中也不存在
2. Redis获取到null数据未进行持久化，直接返回
3. 下次 此类数据到达后重复上述过程
4. 出现黑客攻击服务器
这样对于访问数据库中没有的数据，每次访问redis都会不命中，进而会查询数据库，数据库压力过大而导致数据库服务崩溃。

**解决方案**：
1. 缓存null
   对于查询结果为null的数据进行保存(长期使用，定期清理)，设定短时效，例如20~60秒，最长5min
   <font color=gray>对于查询没有的数据的请求，查询后将改数据缓存起来，其值为null, 当下次有相同的访问的时候就可以命中了。但这样对内存的开销较大</font>
2. 白名单策略
   - 提前预热各种分类数据id对应的bitmaps, id作为bitmaps的offset,相当于设置了数据白名单。当加载正常数据时放行，收到异常数据时拦截。(效率偏低)
   - 使用布隆过滤器（有关布隆过滤器的命中问题对当前状况可用忽略）
3. 实时监控
   实时监控redis的命中率（业务正常范围时，通常会有一个波动）与null数据的占比
   - 非活动时段波动： 通常检测3~5倍，超过5倍纳入重点排查对象
   - 活动时段波动： 通常检测10~50倍，超过50倍纳入重点排查对象
   根据倍数不同，启动不同的排查流程。然后使用黑名单进行防控
4. key加密
   问题出现后，临时启动防火业务key，对key进行业务层传输加密服务，设定校验程序，校验过来的key
   例如：每天随机分配60个加密串，挑选2~3个混淆到页面数据id中，发现访问key不满足规则，驳回数据访问。
# 总结
缓存穿透访问了不存在的数据，跳过了合法数据的redis数据缓存阶段，每次访问数据库，导致数据库服务器压力。 通常此类数据的出现量是一个较低的值，当出现此类情况以毒攻毒，并及时报警。应对策略应该在临时预案方面多做文章。无论是黑名单还是白名单，都是对整体系统的压力，报警解除后应尽快移除。